<!-- thêm CSS modal (put vào <style> hoặc trong head) -->
<style>
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:9999}
  .modal{background:#111;padding:18px;border-radius:8px;width:320px;color:#eee}
  .modal h3{margin-bottom:8px;color:#26ffd9;font-size:1.05rem}
  .modal label{font-size:.85rem;margin-top:8px;display:block}
  .modal input,.modal textarea{width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #333;background:#0f1720;color:#eee}
  .modal .row{display:flex;gap:8px}
  .btn-primary{display:inline-block;padding:8px 12px;border-radius:6px;text-decoration:none;border:1px solid #26ffd9;color:#26ffd9;background:transparent;font-weight:600;margin-top:10px;cursor:pointer}
  .btn-muted{padding:8px 12px;border-radius:6px;border:1px solid #555;color:#aaa;background:transparent;cursor:pointer;margin-top:10px}
</style>

<!-- modal (put before </body>) -->
<div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h3 id="modalTitle">Contact to buy</h3>
    <div><strong id="modalItem"></strong></div>

    <label>Tên</label>
    <input id="leadName" placeholder="Họ tên"/>

    <label>Phone</label>
    <input id="leadPhone" placeholder="Số điện thoại"/>

    <label>Email</label>
    <input id="leadEmail" placeholder="Email"/>

    <label>Ghi chú</label>
    <textarea id="leadNote" rows="3" placeholder="Yêu cầu thêm..."></textarea>

    <div class="row" style="justify-content:flex-end">
      <button class="btn-muted" onclick="closeModal()">Hủy</button>
      <button class="btn-primary" onclick="sendLeadMail()">Gửi</button>
    </div>
  </div>
</div>

<script>
  const mailTo = 'your.legal@mail.com'; // thay bằng email hợp lệ

  function openContactModal(itemId, price) {
    document.getElementById('modalBackdrop').style.display = 'flex';
    document.getElementById('modalItem').textContent = `Product: ${itemId} — ${price}`;
    // reset fields
    document.getElementById('leadName').value = '';
    document.getElementById('leadPhone').value = '';
    document.getElementById('leadEmail').value = '';
    document.getElementById('leadNote').value = '';
  }
  function closeModal() {
    document.getElementById('modalBackdrop').style.display = 'none';
  }
  function sendLeadMail() {
    const name = document.getElementById('leadName').value.trim();
    const phone = document.getElementById('leadPhone').value.trim();
    const email = document.getElementById('leadEmail').value.trim();
    const note = document.getElementById('leadNote').value.trim();
    const itemText = document.getElementById('modalItem').textContent;

    const subject = encodeURIComponent(`Inquiry: ${itemText}`);
    const body = encodeURIComponent(
      `${itemText}\n\nName: ${name}\nPhone: ${phone}\nEmail: ${email}\nNote: ${note}\n\n---\nSent from website`
    );

    // mở mail client người dùng (không gửi dữ liệu nhạy cảm)
    window.location.href = `mailto:${mailTo}?subject=${subject}&body=${body}`;
    closeModal();
  }
</script>

<!-- trong vòng lặp tạo card: thay phần tạo nội dung bằng nút mở modal -->
<!-- ví dụ thay phần grid.insertAdjacentHTML(...) bằng mẫu này -->
grid.insertAdjacentHTML('beforeend', `
  <div class="card">
    <div class="info"><strong>Item ID:</strong> ${itemId}</div>
    <div class="info"><strong>Price:</strong> ${priceText}</div>
    <button class="btn-primary" onclick="openContactModal('${itemId}','${priceText}')">Contact</button>
  </div>
`);
